// This file was generated by Mendix Modeler.
//
// WARNING: Only the following code will be retained when actions are regenerated:
// - the import list
// - the code between BEGIN USER CODE and END USER CODE
// - the code between BEGIN EXTRA CODE and END EXTRA CODE
// Other code you write will be lost the next time you deploy the project.
// Special characters, e.g., é, ö, à, etc. are supported in comments.

package advancedsearch.actions;

import java.util.Calendar;
import java.util.Date;
import com.mendix.systemwideinterfaces.core.IContext;
import com.mendix.webui.CustomJavaAction;

public class PeriodTimeCheck extends CustomJavaAction<java.lang.Boolean>
{
	private java.util.Date PeriodStart;
	private java.util.Date PeriodEnd;
	private java.util.Date TimeToCheck;

	public PeriodTimeCheck(IContext context, java.util.Date PeriodStart, java.util.Date PeriodEnd, java.util.Date TimeToCheck)
	{
		super(context);
		this.PeriodStart = PeriodStart;
		this.PeriodEnd = PeriodEnd;
		this.TimeToCheck = TimeToCheck;
	}

	@Override
	public java.lang.Boolean executeAction() throws Exception
	{
		// BEGIN USER CODE
		
		Calendar fromTime = Calendar.getInstance();
		Calendar untilTime = Calendar.getInstance();
		Calendar timeToCheck = Calendar.getInstance();
		
		fromTime.setTime(this.PeriodStart);
		fromTime.set(1970, 0, 1);
		untilTime.setTime(this.PeriodEnd);
		untilTime.set(1970, 0, 1);
		timeToCheck.setTime(this.TimeToCheck);
		timeToCheck.set(1970, 0, 1);		
		
		// Add a 
		if (untilTime.before(fromTime)) {
			untilTime.add(Calendar.DATE, 1);
			timeToCheck.add(Calendar.DATE, 1);
		}

		Date x = timeToCheck.getTime();
		if (x.after(fromTime.getTime()) && x.before(untilTime.getTime())) {
			return true;
		} else {
			return false;
		}

		// END USER CODE
	}

	/**
	 * Returns a string representation of this action
	 */
	@Override
	public java.lang.String toString()
	{
		return "PeriodTimeCheck";
	}

	// BEGIN EXTRA CODE
	// END EXTRA CODE
}
